# Supported Applications Catalog
# This file is purely for documentation and planning - NOT parsed at runtime
# 
# Actual theming happens via modular app architecture:
# 1. Each app has a class in apps/ directory inheriting from BaseApp
# 2. Apps registered in apps/__init__.py::get_all_apps()
# 3. Automatically invoked by theme-manager.py when running theme commands
#
# Schema version: 1.1
# Last updated: 2025-11-28

# ==========================================================================
# Implementation Status Summary
# ==========================================================================
# 
# Modular Architecture (apps/*.py classes):
#   ✅ WezTerm       - apps/wezterm.py       - External file method (201 lines)
#   ✅ Borders       - apps/borders.py       - Inline template method (120 lines)
#   ✅ SketchyBar    - apps/sketchybar.py    - External file method (185 lines)
#   ✅ Atuin         - apps/atuin.py         - External file method (148 lines)
#   ✅ CAVA          - apps/cava.py          - External file method (157 lines)
#   ✅ Flameshot     - apps/flameshot.py     - Inline surgical swap INI (73 lines)
#   ✅ ncspot        - apps/ncspot.py        - Inline surgical swap TOML (154 lines)
#   ✅ NeoVim        - apps/nvim.py          - External file method (252 lines)
#   ✅ Starship      - apps/starship.py      - Inline surgical swap TOML (174 lines)
#   ✅ btop          - apps/btop.py          - External file method (201 lines)
#   ✅ Television    - apps/television.py    - Hybrid method (119 lines)
#   ✅ bottom        - apps/bottom.py        - Inline surgical swap TOML (207 lines)
#   ✅ OpenCode      - apps/opencode.py      - Builtin theme method
#   ✅ lazygit       - apps/lazygit.py       - Inline surgical swap YAML (140 lines) [NEW 2025-11-28]
#   ✅ Posting       - apps/posting.py       - External file method YAML (175 lines) [NEW 2025-11-28]
#   ✅ Yazi          - apps/yazi.py          - External file method (flavor.toml) [NEW 2025-11-28]
#   ✅ gitui         - apps/gitui.py         - External file method RON (130 lines) [NEW 2025-11-28]
#
# Not Themed (service/orchestrator apps):
#   ⭕ AeroSpace     - Window manager, no theming needed
#
# Architecture Completion: 17/17 apps (100%) ✅
# Total themed apps: 17 modular + 0 legacy = 17 apps
# ==========================================================================

apps:
  # ==========================================================================
  # WezTerm - Terminal Emulator (CURRENT IMPLEMENTATION)
  # ==========================================================================
  wezterm:
    # Basic Info
    display_name: WezTerm
    config_file: ~/.config/wezterm/wezterm.lua
    config_format: lua
    app_type: terminal_emulator
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: external_file        # Priority 1: Load from external file
          enabled: true
          notes: "Generates colors-wezterm.lua with Catppuccin palette"
        - method: terminal_colors       # Priority 2: Fallback to 16 ANSI (N/A for terminal emulator)
          enabled: false
          notes: "Terminal emulator defines colors, doesn't inherit them"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: external_file        # Priority 1: Load MD3 colors from file
          enabled: true
          notes: "Generates colors-wezterm.lua with Material Design 3 colors"
        - method: terminal_colors       # Priority 2: Fallback (N/A for terminal emulator)
          enabled: false
    
    # External File Configuration
    external_files:
      colors:
        path: ~/.config/wezterm/colors-wezterm.lua
        format: lua_module
        template: dot_config/wezterm/colors-wezterm.lua.tmpl
        load_mechanism: require("colors-wezterm")
        notes: "Returns table with foreground, background, cursor, selection, ansi, brights"
      opacity:
        path: ~/.config/wezterm/opacity-wezterm.lua
        format: lua_module
        template: dot_config/wezterm/opacity-wezterm.lua.tmpl
        load_mechanism: require("opacity-wezterm")
        notes: "Returns table with enabled, opacity, blur fields"
    
    # Opacity Support
    opacity:
      supported: true
      method: external_file             # Separate opacity-wezterm.lua file
      config_key: window_background_opacity
      blur_support: true                # macOS only (macos_window_background_blur)
      notes: "Opacity: 0-100 where 0=invisible, 100=solid. Runtime value: 0.0-1.0"
      
    # Reload Behavior
    reload:
      automatic: true                   # Auto-reloads on config change
      method: file_watch
      delay_seconds: 2                  # theme-manager.py waits 2s after write
      manual_command: null              # No manual reload needed
      signal_support: true              # Can also use USR2 signal
      notes: "WezTerm watches config directory and reloads < 1s"
    
    # Implementation Details (for Python generators)
    generator:
      class: WeztermTheme
      module: apps.wezterm
      method: external_file
      location: dot_config/theme-system/scripts/apps/wezterm.py
      apply_method: apply_theme
      functions:
        - generate_colors
        - generate_opacity
      notes: "Modular architecture: app registered in apps/__init__.py, called via app.apply_theme()"
    
    # Color Mappings
    color_mappings:
      static:
        foreground: "{{ .theme.colors.text }}"
        background: "{{ .theme.colors.base }}"
        cursor_bg: "{{ .theme.colors.mauve }}"
        cursor_fg: "{{ .theme.colors.crust }}"
        selection_bg: "{{ .theme.colors.surface2 }}"
        selection_fg: "{{ .theme.colors.text }}"
        split: "{{ .theme.colors.mauve }}"
        ansi_black: "{{ .theme.colors.surface1 }}"
        ansi_red: "{{ .theme.colors.red }}"
        ansi_green: "{{ .theme.colors.green }}"
        ansi_yellow: "{{ .theme.colors.yellow }}"
        ansi_blue: "{{ .theme.colors.blue }}"
        ansi_magenta: "{{ .theme.colors.mauve }}"
        ansi_cyan: "{{ .theme.colors.teal }}"
        ansi_white: "{{ .theme.colors.subtext1 }}"
      
      dynamic:
        foreground: "{{ .theme.material.on_surface }}"
        background: "{{ .theme.material.background }}"
        cursor_bg: "{{ .theme.material.primary }}"
        cursor_fg: "{{ .theme.material.on_primary }}"
        selection_bg: "{{ .theme.material.primary_container }}"
        selection_fg: "{{ .theme.material.on_primary_container }}"
        ansi_black: "{{ .theme.material.surface }}"
        ansi_red: "{{ .theme.material.error }}"
        ansi_green: "{{ .theme.material.tertiary }}"
        ansi_yellow: "{{ .theme.material.secondary_container }}"
        ansi_blue: "{{ .theme.material.primary }}"
        ansi_magenta: "{{ .theme.material.secondary }}"
        ansi_cyan: "{{ .theme.material.tertiary_container }}"
        ansi_white: "{{ .theme.material.on_surface }}"
    
    # Implementation Status
    status:
      implemented: true
      tested: true
      bootstrap_working: true           # chezmoi apply generates initial files
      runtime_working: true             # theme set commands work
      date_implemented: "2025-10-16"
      implementation_commit: "5663fef"
    
    # Known Issues / Notes
    notes:
      - "WezTerm is the reference implementation for the external_file method"
      - "Auto-reload requires no user intervention"
      - "Blur effect only available on macOS"
      - "Both templates and runtime generators produce identical output format"
      - "Runtime generators bypass chezmoi for sub-second theme switching"

  # ==========================================================================
  # borders (JankyBorders) - Window Border System (CURRENT IMPLEMENTATION)
  # ==========================================================================
  borders:
    # Basic Info
    display_name: JankyBorders
    config_file: ~/.config/borders/bordersrc
    config_format: bash
    app_type: window_border_system
    platform: macos
    homepage: https://github.com/FelixKratz/JankyBorders
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: inline_template        # Priority 1: Full bash script regeneration
          enabled: true
          notes: "Regenerates entire bordersrc with Mauve for active borders (user preference)"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: inline_template        # Priority 1: Full bash script regeneration
          enabled: true
          notes: "Regenerates entire bordersrc with MD3 primary color for active borders"
    
    # Template Configuration
    template:
      path: dot_config/borders/executable_bordersrc.tmpl
      output: ~/.config/borders/bordersrc
      executable: true
      notes: "Bash script that executes: borders \"${options[@]}\""
    
    # Opacity Support
    opacity:
      supported: true
      method: color_alpha              # Uses alpha channel in 0xAARRGGBB format
      always_opaque: true              # Ignores global opacity setting for visibility
      notes: "Window borders should always be fully visible (0xff prefix)"
    
    # Reload Behavior
    reload:
      automatic: false                 # No file watching
      method: execute_script           # Must execute bordersrc or run borders command
      requires_arguments: true         # Cannot run bare 'borders' when already running
      notes: "Execute bordersrc script which passes options as arguments to borders command"
    
    # Implementation Details (for Python generators)
    generator:
      class: BordersTheme
      module: apps.borders
      method: inline_template
      location: dot_config/theme-system/scripts/apps/borders.py
      apply_method: apply_theme
      functions:
        - generate_config
        - reload
      notes: "Modular architecture: app registered in apps/__init__.py, called via app.apply_theme()"
    
    # Color Mappings
    color_mappings:
      static:
        active_color: "0xff{{ trimPrefix \"#\" .theme.colors.mauve }}"
        inactive_color: "0xff{{ trimPrefix \"#\" .theme.colors.surface0 }}"
        notes: "User preference: Mauve for active borders in static themes"
      
      dynamic:
        active_color: "0xff{{ trimPrefix \"#\" .theme.material.primary }}"
        inactive_color: "0xff{{ trimPrefix \"#\" .theme.material.surface_container }}"
        notes: "Primary color for active, subtle container for inactive"
    
    # Integration with Other Apps
    integrations:
      aerospace:
        relationship: "AeroSpace starts borders at login and on workspace changes"
        startup_command: "after-startup-command = ['exec-and-forget borders']"
        workspace_reload: "exec-on-workspace-change = ['exec-and-forget', 'borders']"
        notes: "borders is guaranteed to be running when AeroSpace is active"
    
    # Implementation Status
    status:
      implemented: true
      tested: true
      bootstrap_working: true           # chezmoi apply generates bordersrc
      runtime_working: true             # theme set commands regenerate and reload
      date_implemented: "2025-10-17"
      implementation_commit: "pending"
    
    # Known Issues / Notes
    notes:
      - "No official Catppuccin port - manual color mapping required"
      - "Color format is 0xAARRGGBB (alpha + RGB hex)"
      - "Running 'borders' without args when running produces error"
      - "Must execute bordersrc script to pass options as arguments"
      - "AeroSpace integration ensures borders is always running"
      - "Reload happens via script execution, not file watching"
      - "User preference: Mauve for active borders (favorite Catppuccin color)"

  # ==========================================================================
  # SketchyBar - macOS Menu Bar Replacement (CURRENT IMPLEMENTATION)
  # ==========================================================================
  sketchybar:
    # Basic Info
    display_name: SketchyBar
    config_file: ~/.config/sketchybar/sketchybarrc
    config_format: bash
    app_type: status_bar
    platform: macos
    homepage: https://github.com/FelixKratz/SketchyBar
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: external_file        # Priority 1: Load from external bash script
          enabled: true
          notes: "Generates colors-sketchybar.sh with Catppuccin palette"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: external_file        # Priority 1: Load MD3 colors from file
          enabled: true
          notes: "Generates colors-sketchybar.sh with Material Design 3 colors"
    
    # External File Configuration
    external_files:
      colors:
        path: ~/.config/sketchybar/colors-sketchybar.sh
        format: bash_script
        template: dot_config/sketchybar/colors-sketchybar.sh.tmpl
        load_mechanism: source "$CONFIG_DIR/colors-sketchybar.sh"
        notes: "Exports color variables: FOREGROUND, BACKGROUND, PRIMARY, SECONDARY, TERTIARY, ERROR, SURFACE, OUTLINE, plus semantic colors"
      opacity:
        path: ~/.config/sketchybar/opacity-sketchybar.sh
        format: bash_script
        template: dot_config/sketchybar/opacity-sketchybar.sh.tmpl
        load_mechanism: source "$CONFIG_DIR/opacity-sketchybar.sh"
        notes: "Exports OPACITY_ENABLED, OPACITY_ALPHA (0xNN hex), BLUR_RADIUS, plus add_opacity() helper function"
    
    # Opacity Support
    opacity:
      supported: true
      method: external_file             # Separate opacity-sketchybar.sh file
      format: argb_alpha                # Uses alpha channel in ARGB 0xAARRGGBB format
      conversion: "0x[opacity%→hex]RRGGBB"
      blur_support: true                # blur_radius adjusts with opacity
      notes: "Opacity: 0-100% → Alpha: 0x00-0xFF. Helper function add_opacity() applies alpha to colors"
      
    # Reload Behavior
    reload:
      automatic: false                  # No file watching
      method: manual                    # Must run command
      manual_command: sketchybar --reload
      reload_time: "<1 second"
      notes: "Fast full reload. Alternatively can update items surgically with --set"
    
    # Implementation Details (for Python generators)
    generator:
      class: SketchybarTheme
      module: apps.sketchybar
      method: external_file
      location: dot_config/theme-system/scripts/apps/sketchybar.py
      apply_method: apply_theme
      functions:
        - generate_colors
        - generate_opacity
        - reload
      notes: "Modular architecture: app registered in apps/__init__.py, called via app.apply_theme()"
    
    # Color Mappings (Semantic Abstraction Layer)
    color_mappings:
      # Semantic colors (what configs actually use)
      semantic_layer:
        BAR_COLOR: "$BACKGROUND"
        ICON_COLOR: "$FOREGROUND"
        LABEL_COLOR: "$FOREGROUND"
        ITEM_BG_COLOR: "$SURFACE"
        ITEM_BG_BRIGHT: "$SURFACE_BRIGHT"
        BORDER_COLOR: "$OUTLINE"
        ACCENT_COLOR: "$PRIMARY"
      
      # Static theme mapping (Catppuccin → Base colors)
      static:
        FOREGROUND: "{{ .theme.colors.text }}"
        BACKGROUND: "{{ .theme.colors.base }}"
        PRIMARY: "{{ .theme.colors.mauve }}"
        SECONDARY: "{{ .theme.colors.blue }}"
        TERTIARY: "{{ .theme.colors.green }}"
        ERROR: "{{ .theme.colors.red }}"
        SURFACE: "{{ .theme.colors.surface0 }}"
        SURFACE_BRIGHT: "{{ .theme.colors.surface2 }}"
        SURFACE_DIM: "{{ .theme.colors.mantle }}"
        OUTLINE: "{{ .theme.colors.overlay0 }}"
      
      # Dynamic theme mapping (Material Design 3 → Base colors)
      dynamic:
        FOREGROUND: "{{ .theme.material.on_surface }}"
        BACKGROUND: "{{ .theme.material.background }}"
        PRIMARY: "{{ .theme.material.primary }}"
        SECONDARY: "{{ .theme.material.secondary }}"
        TERTIARY: "{{ .theme.material.tertiary }}"
        ERROR: "{{ .theme.material.error }}"
        SURFACE: "{{ .theme.material.surface }}"
        SURFACE_BRIGHT: "{{ .theme.material.surface_bright }}"
        SURFACE_DIM: "{{ .theme.material.surface_dim }}"
        OUTLINE: "{{ .theme.material.outline }}"
    
    # Visual Aesthetics (Pacman Theme)
    visual_style:
      theme_name: "Pacman (inspired by itaysharir-dotfiles)"
      bar_structure:
        height: 50
        corner_radius: 14
        margin: 95                      # Floating bar effect
        y_offset: 9                     # Slight drop from top
        style: "Rounded floating bar with breathing room"
      
      widget_style:
        shape: "Individual pills (not brackets)"
        background_corner_radius: 20    # High radius for capsule shape
        background_height: 33           # Pill height within 50px bar
        pattern: "Each widget has separate rounded pill background"
      
      typography:
        main_font: "Monocraft"
        icon_font: "Font Awesome 7 Free"
        aesthetic: "Retro pixel gaming (Minecraft-inspired)"
        notes: "Install via: brew install --cask font-monocraft font-fontawesome"
      
      workspace_indicators:
        style: "Dot characters (⬤) with dynamic pill backgrounds"
        active_state: "Pill background with ACCENT_COLOR"
        inactive_state: "No background, just dot"
        integration: "AeroSpace workspace integration"
    
    # Integration with Other Apps
    integrations:
      aerospace:
        relationship: "SketchyBar displays AeroSpace workspace state"
        plugin: "dot_config/sketchybar/plugins/executable_aerospace.sh"
        events: "Custom event: aerospace_workspace_change"
        notes: "Workspace indicators update on focus change, show pill on active"
    
    # Implementation Status
    status:
      implemented: true
      tested: true
      bootstrap_working: true           # chezmoi apply generates initial files
      runtime_working: true             # theme set commands work
      date_implemented: "2025-10-17"
      implementation_plan: "thoughts/shared/plans/sketchybar-pacman-theme-integration.md"
      research_doc: "thoughts/shared/research/2025-10-17_07-21-41_app-config-analysis-sketchybar.md"
    
    # Known Issues / Notes
    notes:
      - "Pacman theme provides retro gaming aesthetic with modern theming"
      - "Individual pill backgrounds (not brackets) for clean separation"
      - "Helper function add_opacity() converts #RRGGBB to 0xAARRGGBB with current opacity"
      - "Fast reload (< 1 second) via sketchybar --reload command"
      - "Monocraft font gives pixel/retro aesthetic matching Pacman theme"
      - "Font Awesome 7 Free used for all icons (battery, clock, volume, etc.)"
      - "Workspace dots (⬤) dynamically show pill backgrounds on active workspace"
      - "Both templates and runtime generators produce identical output format"
      - "Runtime generators bypass chezmoi for sub-second theme switching"
      - "Supports static Catppuccin themes + dynamic Material Design 3 from wallpaper"

  # ==========================================================================
  # Atuin - TUI Shell History Tool (CURRENT IMPLEMENTATION)
  # ==========================================================================
  atuin:
    # Basic Info
    display_name: Atuin
    config_file: ~/.config/atuin/config.toml
    config_format: toml
    app_type: tui
    platform: cross_platform
    homepage: https://atuin.sh/
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: external_file        # Priority 1: Load from external TOML file
          enabled: true
          notes: "Generates theme files in ~/.config/atuin/themes/ with Catppuccin colors"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: external_file        # Priority 1: Load MD3 colors from file
          enabled: true
          notes: "Generates dynamic.toml with Material Design 3 colors"
    
    # External File Configuration
    external_files:
      theme:
        path: ~/.config/atuin/themes/{theme_name}.toml
        format: toml
        template: dot_config/atuin/themes/dynamic.toml.tmpl
        load_mechanism: "[theme] name reference in config.toml"
        notes: "Theme files define 8 semantic color roles"
    
    # Semantic Color Roles (8 roles)
    color_roles:
      - AlertInfo: "Success/info messages"
      - AlertWarn: "Warning messages"
      - AlertError: "Error messages"
      - Annotation: "Metadata, tags, timestamps"
      - Base: "Main foreground text"
      - Guidance: "Help text, instructions"
      - Important: "Highlighted/emphasized items"
      - Title: "Section headers, titles"
    
    # Opacity Support
    opacity:
      supported: false
      notes: "Atuin only accepts 6-digit hex RGB colors (no alpha channel)"
      
    # Reload Behavior
    reload:
      automatic: true                   # Config loaded fresh on each invocation
      method: on_demand
      manual_command: null              # No command needed - just invoke Atuin again
      reload_time: "< 1ms"
      notes: "No background daemon. Config loads on each Atuin invocation (Ctrl+R). Changes take effect immediately on next use."
    
    # Implementation Details (for Python generators)
    generator:
      class: AtuinTheme
      module: apps.atuin
      method: external_file
      location: dot_config/theme-system/scripts/apps/atuin.py
      apply_method: apply_theme
      functions:
        - generate_theme_file
        - update_config_reference
      notes: "Modular architecture: app registered in apps/__init__.py, called via app.apply_theme()"
    
    # Color Mappings
    color_mappings:
      static:
        AlertInfo: "{{ .theme.colors.green }}"
        AlertWarn: "{{ .theme.colors.peach }}"
        AlertError: "{{ .theme.colors.red }}"
        Annotation: "{{ .theme.colors.mauve }}"
        Base: "{{ .theme.colors.text }}"
        Guidance: "{{ .theme.colors.subtext0 }}"
        Important: "{{ .theme.colors.red }}"
        Title: "{{ .theme.colors.mauve }}"
        notes: "AlertError and Important share red; Annotation and Title share mauve (user's favorite)"
      
      dynamic:
        AlertInfo: "{{ .theme.material.tertiary }}"
        AlertWarn: "{{ .theme.material.secondary }}"
        AlertError: "{{ .theme.material.error }}"
        Annotation: "{{ .theme.material.primary }}"
        Base: "{{ .theme.material.on_surface }}"
        Guidance: "{{ .theme.material.outline }}"
        Important: "{{ .theme.material.error }}"
        Title: "{{ .theme.material.primary }}"
        notes: "Semantic MD3 mapping for dynamic themes"
    
    # Configuration Integration
    config_integration:
      theme_reference:
        file: ~/.config/atuin/config.toml
        section: "[theme]"
        key: "name"
        update_method: "tomlkit (surgical update, preserves comments)"
        values:
          static: "catppuccin-{variant}-mauve"
          dynamic: "dynamic"
    
    # Implementation Status
    status:
      implemented: true
      tested: true
      bootstrap_working: true           # chezmoi apply generates dynamic.toml
      runtime_working: true             # theme set commands work
      date_implemented: "2025-10-19"
      implementation_plan: "thoughts/shared/plans/atuin-theme-integration.md"
      research_doc: "thoughts/shared/research/2025-10-18_17-36-32_app-config-analysis-atuin.md"
    
    # Known Issues / Notes
    notes:
      - "Atuin is a TUI app written in Rust using ratatui framework"
      - "Theme files are TOML with [theme] and [colors] sections"
      - "No official builtin Catppuccin - uses external theme files"
      - "Official Catppuccin themes exist at github.com/catppuccin/atuin"
      - "Config reference auto-updated via tomlkit (preserves comments)"
      - "No opacity support - all colors are solid RGB"
      - "Automatic reload on next invocation - no shell restart needed"
      - "Both templates and runtime generators produce identical output format"
      - "Runtime generators bypass chezmoi for instant theme switching"
      - "Supports static Catppuccin themes + dynamic Material Design 3 from wallpaper"

  # ==========================================================================
  # NeoVim - Text Editor (CURRENT IMPLEMENTATION)
  # ==========================================================================
  nvim:
    # Basic Info
    display_name: NeoVim
    config_file: ~/.config/nvim/init.lua
    config_format: lua
    app_type: text_editor
    platform: cross_platform
    homepage: https://neovim.io/
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: builtin                  # Priority 1: Native Catppuccin plugin
          enabled: true
          notes: "Uses catppuccin/nvim plugin with builtin flavors"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: external_file            # Priority 1: Standalone colorscheme with MD3 colors
          enabled: true
          notes: "Generates colors-nvim.lua and loads via standalone dynamic.lua colorscheme"
    
    # External File Configuration
    external_files:
      colors:
        path: ~/.config/nvim/lua/themes/colors-nvim.lua
        format: lua_module
        template: null                     # Runtime-only, not templated
        load_mechanism: require("themes.colors-nvim")
        notes: "Returns table with Catppuccin-compatible palette for dynamic themes. Empty table for static themes."
      
      theme_state:
        path: ~/.config/nvim/lua/themes/theme-state.lua
        format: lua_module
        template: null                     # Runtime-only
        load_mechanism: require("themes.theme-state")
        notes: "Returns {theme_name, is_dynamic} for file watcher to detect theme type changes"
      
      opacity_data:
        path: ~/.config/nvim/lua/config/opacity-data.lua
        format: lua_module
        template: null                     # Runtime-only
        load_mechanism: require("config.opacity-data")
        notes: "Returns {opacity, opacity_percent} for opacity-manager to apply settings"
      
      persistence_state:
        path: ~/.local/share/nvim/theme-state.json
        format: json
        template: null                     # Runtime-only
        load_mechanism: "Auto-saved by theme-persistence.lua autocmd"
        notes: "JSON file with {colorscheme, last_updated} for theme persistence across restarts"
    
    # Architecture Modules (Autocmd-Based)
    architecture:
      modules:
        - name: theme-persistence.lua
          location: ~/.config/nvim/lua/config/theme-persistence.lua
          what: "Saves/loads colorscheme via ColorScheme autocmd"
          
        - name: theme-filewatcher.lua
          location: ~/.config/nvim/lua/config/theme-filewatcher.lua
          what: "Detects external theme changes via file mtimes"
          watched_files:
            - "~/.config/nvim/lua/themes/colors-nvim.lua"
            - "~/.config/nvim/lua/themes/theme-state.lua"
            - "~/.config/nvim/lua/config/opacity-data.lua"
          
        - name: opacity-manager.lua
          location: ~/.config/nvim/lua/config/opacity-manager.lua
          what: "Applies opacity after ColorScheme event (Neovide + terminal)"
      
      initialization:
        file: ~/.config/nvim/lua/config/autocmds.lua
        loads:
          - require("config.theme-persistence").setup()
          - require("config.theme-filewatcher").setup()
          - require("config.opacity-manager").setup()
    
    # Opacity Support
    opacity:
      supported: true
      method: external_file               # opacity-data.lua generated by theme-manager.py
      neovide:
        method: vim_g_variables           # vim.g.neovide_opacity
        blur_support: true                # vim.g.neovide_window_blurred
        cursor_fix: true                  # guicursor set to use Cursor highlight
      terminal:
        method: transparent_background    # Catppuccin's transparent_background option
        notes: "Terminal emulator handles actual transparency"
      notes: "Opacity: 0-100 where 0=invisible, 100=solid. Runtime value: 0.0-1.0"
      
    # Reload Behavior
    reload:
      automatic: true                     # Auto-reloads on external changes
      method: file_watch                  # File watcher checks mtimes
      trigger_events: ["FocusGained", "BufEnter"]
      detection_time: "~2 seconds"        # Time to detect changes after focus
      manual_keybindings:
        - "<leader>utm - Catppuccin Mocha"
        - "<leader>utl - Catppuccin Latte"
        - "<leader>utf - Catppuccin Frappe"
        - "<leader>uta - Catppuccin Macchiato"
        - "<leader>utd - Dynamic Theme"
      notes: "External changes (theme set/mode/opacity) auto-reload. Manual switches via keybindings also persist."
    
    # Implementation Details (for Python generators)
    generator:
      class: NvimTheme
      module: apps.nvim
      method: external_file
      location: dot_config/theme-system/scripts/apps/nvim.py
      apply_method: apply_theme
      functions:
        - generate_colors                 # Generates colors-nvim.lua (8-hue MD3 or empty)
        - generate_theme_state            # Generates theme-state.lua (extracted from generate_colors)
        - generate_opacity_data           # Generates opacity-data.lua
      helpers:
        - _generate_dynamic_colors        # Dynamic MD3 theme generator
        - _generate_static_colors         # Static Catppuccin (empty table)
        - _format_dynamic_lua             # Lua palette formatter
        - _log_reload_instructions        # Reload message
      notes: "Modular architecture: registered in apps/__init__.py, called via app.apply_theme(). Complexity: High (252 lines) - 8-hue generation, validation, semantic ANSI."
    
    # Color Mappings
    color_mappings:
      static:
        method: "Catppuccin plugin builtin"
        flavors: ["mocha", "latte", "frappe", "macchiato"]
        accent_color: "mauve"             # User preference for UI highlights
        cursor: "{ fg = colors.base, bg = colors.mauve }"
        notes: "Uses official catppuccin/nvim plugin with highlight_overrides for mauve accents"
      
      dynamic:
        method: "Standalone dynamic.lua colorscheme"
        palette_structure: "8 distinct hue families (red, maroon, peach, yellow, green, teal, sky, sapphire, blue, lavender, mauve, pink)"
        base_colors: "Material Design 3 surface colors"
        text_hierarchy: "WCAG AAA compliant (text, subtext1, subtext0)"
        semantic_ansi: "True semantic ANSI colors (green=green, yellow=yellow, blue=blue)"
        notes: "Generated from wallpaper via matugen, mapped to Catppuccin-compatible structure"
    
    # Plugin Integration
    plugins:
      catppuccin:
        repo: "catppuccin/nvim"
        priority: 1000
        config: "dot_config/nvim/lua/plugins/catppuccin.lua"
        simplified: true                  # Removed manual loading logic
        notes: "Plugin config sets up Catppuccin, but theme-persistence.lua handles loading"
      
      lazyvim:
        integration: "opts.colorscheme = function() end"
        notes: "Prevents LazyVim from overriding autocmd-loaded theme"
    
    # Colorscheme Files
    colorschemes:
      dynamic:
        file: "dot_config/nvim/colors/dynamic.lua"
        type: "Standalone colorscheme"
        lines: 255
        features:
          - "Loads colors from themes.colors-nvim"
          - "Graceful fallback to catppuccin-mocha if colors missing"
          - "Sets all highlight groups manually"
          - "Supports transparency via opacity config"
    
    # Implementation Status
    status:
      implemented: true
      tested: true
      bootstrap_working: true             # chezmoi apply sets up configs
      runtime_working: true               # theme set/mode/opacity work automatically
      date_implemented: "2025-10-21"
      architecture: modular               # Fully modular as of 2025-10-27
      legacy_removed: true                # blend_hex_colors, generate_nvim_* removed
      dead_code_removed: true             # blend_hex_colors was dead code
      date_refactored: "2025-10-27"
      refactor_line_reduction: 198        # theme-manager.py: 536 → 338 lines
      implementation_plan: "thoughts/shared/plans/nvim-modular-architecture-refactor-REFINED.md"
      research_doc: "thoughts/shared/research/2025-10-27_12-40-00_complete-app-architecture-audit.md"
    
    # Known Issues / Notes
    notes:
      - "Autocmd-based architecture: automatic external change detection"
      - "File watcher detects changes within ~2 seconds of focus"
      - "Opacity changes apply immediately in Neovide via opacity-manager.reload()"
      - "Runtime files NOT tracked in chezmoi (they're state, not source)"
      - "No pynvim dependency - file watching handles reloads"
      - "REFACTORED 2025-10-27: Converted to modular architecture (apps/nvim.py)"
      - "Most complex app (252 lines): 8-hue generation, validation, semantic ANSI"
      - "Removed dead code: blend_hex_colors() was never used (duplicate of utils.blend_colors)"
      - "Reduced theme-manager.py by 198 lines (536 → 338 lines, -37%)"

  # ==========================================================================
  # Flameshot - Screenshot Annotation Tool (CURRENT IMPLEMENTATION)
  # ==========================================================================
  flameshot:
    # Basic Info
    display_name: Flameshot
    config_file: ~/.config/flameshot/flameshot.ini
    config_format: ini
    app_type: screenshot_tool
    platform: cross_platform
    homepage: https://flameshot.org/
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: inline                   # Priority 1: Surgical INI edit
          enabled: true
          notes: "Updates uiColor in flameshot.ini with Mauve (user's favorite)"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: inline                   # Priority 1: Surgical INI edit
          enabled: true
          notes: "Updates uiColor with Material Design 3 primary color"
    
    # Opacity Support
    opacity:
      supported: false
      notes: "Flameshot UI is always opaque. Screenshot overlay doesn't support transparency."
      
    # Reload Behavior
    reload:
      automatic: false                  # No config watching
      method: restart                   # Must restart Flameshot to apply
      notes: "Changes apply on next Flameshot launch. No need to restart if not running."
    
    # Implementation Details (for Python generators)
    generator:
      class: FlameshotTheme
      module: apps.flameshot
      method: inline                    # Surgical configparser swap
      location: dot_config/theme-system/scripts/apps/flameshot.py
      apply_method: apply_theme
      functions:
        - _update_ui_color
      notes: "Modular architecture: app registered in apps/__init__.py, called via app.apply_theme()"
    
    # Color Mappings
    color_mappings:
      static:
        uiColor: "{{ .theme.colors.mauve }}"
        notes: "Mauve for UI (user's favorite Catppuccin color)"
      
      dynamic:
        uiColor: "{{ .theme.material.primary }}"
        notes: "Primary color for UI consistency"
    
    # Configuration Details
    config_details:
      target_section: "[General]"
      target_key: "uiColor"
      parser: "configparser.RawConfigParser"
      case_sensitivity: "CRITICAL - must preserve camelCase (uiColor not uicolor)"
      preserve_options: "optionxform = str to prevent lowercasing"
      notes: "drawColor is user's tool color (resets in UI), not theme-managed"
    
    # Implementation Status
    status:
      implemented: true
      tested: true
      bootstrap_working: true           # chezmoi manages static INI
      runtime_working: true             # theme set commands update uiColor
      date_implemented: "2025-10-26"
      research_doc: "thoughts/shared/research/2025-10-26_19-43-49_app-config-analysis-flameshot.md"
    
    # Known Issues / Notes
    notes:
      - "Minimal INI config with single [General] section"
      - "uiColor vs drawColor distinction important"
      - "configparser.optionxform = str preserves camelCase"
      - "No restart needed if Flameshot not running"
      - "Changes apply on next launch"
      - "No official Catppuccin port - manual color setting"

  # ==========================================================================
  # ncspot - Spotify TUI Client (CURRENT IMPLEMENTATION)
  # ==========================================================================
  ncspot:
    # Basic Info
    display_name: ncspot
    config_file: ~/.config/ncspot/config.toml
    config_format: toml
    app_type: tui
    platform: cross_platform
    homepage: https://github.com/hrkfdn/ncspot
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: inline                   # Priority 1: Surgical TOML edit
          enabled: true
          notes: "Updates [theme] section with official Catppuccin ncspot colors"
        - method: terminal_colors          # Priority 2: Fallback for transparency
          enabled: true
          notes: "Manual setup - named ANSI colors inherit from terminal"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: inline                   # Priority 1: Surgical TOML edit
          enabled: true
          notes: "Updates [theme] section with Material Design 3 colors"
        - method: terminal_colors          # Priority 2: Fallback
          enabled: false
          notes: "Dynamic themes need precise MD3 colors, not terminal palette"
    
    # Opacity Support
    opacity:
      supported: false
      method: terminal_transparency
      notes: "ncspot is TUI - transparency controlled by terminal emulator (WezTerm). Hex colors override transparency, named colors respect it."
      
    # Reload Behavior
    reload:
      automatic: false                  # No file watching
      method: manual                    # User must invoke reload
      manual_command: ":reload"
      reload_time: "< 1s"
      notes: "Hot-reload via :reload command in ncspot. No restart needed."
    
    # Implementation Details (for Python generators)
    generator:
      class: NcspotTheme
      module: apps.ncspot
      method: inline                    # Surgical tomlkit swap
      location: dot_config/theme-system/scripts/apps/ncspot.py
      apply_method: apply_theme
      functions:
        - _generate_dynamic_colors
        - _generate_static_colors
        - _update_theme_section
      notes: "Modular architecture: app registered in apps/__init__.py, called via app.apply_theme()"
    
    # Theme Keys (17 ncspot-specific color keys)
    theme_keys:
      - background
      - primary
      - secondary
      - title
      - playing
      - playing_bg
      - highlight
      - highlight_bg
      - playing_selected
      - error
      - error_bg
      - statusbar
      - statusbar_bg
      - statusbar_progress
      - cmdline
      - cmdline_bg
      - search_match
    
    # Color Mappings
    color_mappings:
      static:
        background: "{{ .theme.colors.base }}"
        primary: "{{ .theme.colors.text }}"
        secondary: "{{ .theme.colors.teal }}"
        title: "{{ .theme.colors.mauve }}"
        playing: "{{ .theme.colors.green }}"
        playing_bg: "{{ .theme.colors.base }}"
        highlight: "{{ .theme.colors.text }}"
        highlight_bg: "{{ .theme.colors.surface2 }}"
        playing_selected: "{{ .theme.colors.green }}"
        error: "{{ .theme.colors.base }}"
        error_bg: "{{ .theme.colors.red }}"
        statusbar: "{{ .theme.colors.mauve }}"
        statusbar_bg: "{{ .theme.colors.mantle }}"
        statusbar_progress: "{{ .theme.colors.mauve }}"
        cmdline: "{{ .theme.colors.mauve }}"
        cmdline_bg: "{{ .theme.colors.crust }}"
        search_match: "{{ .theme.colors.red }}"
        notes: "Based on official Catppuccin ncspot themes from github.com/catppuccin/ncspot"
      
      dynamic:
        background: "{{ .theme.material.background }}"
        primary: "{{ .theme.material.on_surface }}"
        secondary: "{{ .theme.material.on_surface_variant }}"
        title: "{{ .theme.material.primary }}"
        playing: "{{ .theme.material.tertiary }}"
        playing_bg: "{{ .theme.material.surface_container_low }}"
        highlight: "{{ .theme.material.on_primary_container }}"
        highlight_bg: "{{ .theme.material.primary_container }}"
        playing_selected: "{{ .theme.material.tertiary }}"
        error: "{{ .theme.material.on_error }}"
        error_bg: "{{ .theme.material.error }}"
        statusbar: "{{ .theme.material.primary }}"
        statusbar_bg: "{{ .theme.material.surface_container_highest }}"
        statusbar_progress: "{{ .theme.material.primary }}"
        cmdline: "{{ .theme.material.primary }}"
        cmdline_bg: "{{ .theme.material.surface_container_high }}"
        search_match: "{{ .theme.material.error }}"
        notes: "Material Design 3 semantic color mapping"
    
    # Configuration Details
    config_details:
      target_section: "[theme]"
      parser: "tomlkit"
      comment_preservation: true
      notes: "tomlkit preserves comments and formatting while updating only theme values"
    
    # Catppuccin Integration
    catppuccin:
      official_port: true
      repository: "https://github.com/catppuccin/ncspot"
      available_flavors:
        - mocha
        - macchiato
        - frappe
        - latte
      available_accents:
        - mauve
        - blue
        - pink
        - green
        - red
        - peach
        - yellow
        - teal
      notes: "Official themes with multiple accent color variations"
    
    # Terminal Colors Fallback
    terminal_colors:
      method: "Manual configuration by user"
      format: "Named ANSI colors (black, white, red, etc.)"
      transparency: "Respects terminal transparency"
      limitation: "Hex colors override transparency"
      example_config:
        background: "black"
        primary: "white"
        title: "magenta"
        playing: "green"
      notes: "Documented in research as fallback for transparency lovers"
    
    # Implementation Status
    status:
      implemented: true
      tested: false                     # Needs testing
      bootstrap_working: true           # Config already in chezmoi
      runtime_working: true             # Generator implemented
      date_implemented: "2025-10-27"
      research_doc: "thoughts/shared/research/2025-10-27_12-27-17_app-config-analysis-ncspot.md"
    
    # Known Issues / Notes
    notes:
      - "ncspot is ncurses TUI written in Rust (5.4k+ GitHub stars)"
      - "Official Catppuccin port with all flavors and accents"
      - "Hot-reload via :reload command - no restart needed"
      - "Hex colors provide precise theming but override transparency"
      - "Named ANSI colors available as manual fallback for transparency"
      - "tomlkit preserves comments in config during updates"
      - "Terminal emulator (WezTerm) controls actual transparency"
      - "Theme generator tool available at ncspot-theme-generator.vaa.red"

  # ==========================================================================
  # Starship - Cross-Platform Shell Prompt (CURRENT IMPLEMENTATION)
  # ==========================================================================
  starship:
    # Basic Info
    display_name: Starship
    config_file: ~/.config/starship/starship.toml
    config_format: toml
    app_type: shell_prompt
    platform: cross_platform
    homepage: https://starship.rs/
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: inline                   # Priority 1: Surgical TOML edit
          enabled: true
          notes: "Updates palette reference and regenerates [palettes.name] section"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: inline                   # Priority 1: Surgical TOML edit
          enabled: true
          notes: "Generates dynamic palette with Material Design 3 colors"
    
    # Native Palette System
    palette_system:
      reference_key: "palette"
      section_format: "[palettes.{name}]"
      color_count: 26
      clean_switching: true
      notes: "Starship's native palette system - removes old palettes on switch for clean config"
    
    # Opacity Support
    opacity:
      supported: false
      notes: "Starship only controls text colors. Transparency handled by terminal emulator."
      
    # Reload Behavior
    reload:
      automatic: true                   # Config re-read on every prompt
      method: on_demand
      manual_command: null              # No command needed
      reload_time: "< 1ms"
      notes: "Instant - starship reads config fresh on every prompt render"
    
    # Implementation Details
    generator:
      class: StarshipTheme
      module: apps.starship
      method: inline                    # Surgical tomlkit swap
      location: dot_config/theme-system/scripts/apps/starship.py
      apply_method: apply_theme
      functions:
        - _generate_dynamic_palette
        - _generate_static_palette
        - _update_config
      notes: "Modular architecture: registered in apps/__init__.py, called via app.apply_theme()"
    
    # Color Mappings
    color_mappings:
      static:
        palette_structure: "26 Catppuccin colors (rosewater through crust)"
        notes: "Direct mapping from Catppuccin palette"
      
      dynamic:
        palette_structure: "26 colors mapped from Material Design 3"
        strategy: "Map MD3 semantic colors to Catppuccin-style names"
        notes: "Maintains compatibility with existing module styles"
    
    # Catppuccin Integration
    catppuccin:
      official_port: true
      repository: "https://github.com/catppuccin/starship"
      available_flavors:
        - mocha
        - macchiato
        - frappe
        - latte
      notes: "Official port provides palette definitions we mirror"
    
    # Cross-Platform Notes
    cross_platform:
      config_portable: true
      platform_differences: none
      notes: "Same starship.toml works on all platforms - no templating needed"
    
    # Implementation Status
    status:
      implemented: true
      tested: true
      bootstrap_working: true           # Config already added via chezmoi add
      runtime_working: true             # Generator working
      date_implemented: "2025-11-26"
      research_doc: "thoughts/shared/research/2025-11-25_21-30-00_app-config-analysis-starship.md"
      implementation_plan: "thoughts/shared/plans/starship-theme-integration.md"
    
    # Known Issues / Notes
    notes:
      - "Starship is Rust binary with excellent cross-platform support"
      - "Native palette system aligns perfectly with our theming approach"
      - "No external file support - must use inline method"
      - "Instant reload on every prompt - seamless theme switching"
      - "Clean switching removes old palettes to keep config tidy"
      - "Preserves all user module configs during palette updates"
      - "Official Catppuccin port at github.com/catppuccin/starship"
      - "No opacity support - terminal handles transparency"

  # ==========================================================================
  # btop - System Monitor (CURRENT IMPLEMENTATION)
  # ==========================================================================
  btop:
    # Basic Info
    display_name: btop
    config_file: ~/.config/btop/btop.conf
    config_format: conf
    app_type: system_monitor
    platform: cross_platform
    homepage: https://github.com/aristocratos/btop
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: external_file          # Priority 1: Generate .theme file
          enabled: true
          notes: "Generates Catppuccin theme in ~/.config/btop/themes/"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: external_file          # Priority 1: Generate .theme file
          enabled: true
          notes: "Generates dynamic.theme with Material Design 3 colors"
    
    # External File Configuration
    external_files:
      theme:
        path: ~/.config/btop/themes/dynamic.theme
        format: btop_theme
        template: null                     # Runtime-only, not templated
        load_mechanism: "color_theme setting in btop.conf"
        notes: "btop native .theme format with 30+ color keys and gradient support"
    
    # Theme Format Details
    theme_format:
      color_keys: 30+
      gradient_support: true
      gradients:
        - "temp_start/mid/end"
        - "cpu_start/mid/end"
        - "free_start/mid/end"
        - "cached_start/mid/end"
        - "available_start/mid/end"
        - "used_start/mid/end"
        - "download_start/mid/end"
        - "upload_start/mid/end"
        - "process_start/mid/end"
      notes: "Rich gradient support for meters and graphs"
    
    # Opacity Support
    opacity:
      supported: true
      method: config_key
      config_key: "theme_background"
      values:
        transparent: "False"              # Empty main_bg for terminal transparency
        opaque: "True"
      notes: "Set theme_background=False and theme[main_bg]='' for transparency"
      
    # Reload Behavior
    reload:
      automatic: false                   # No file watching
      method: signal
      signal: SIGUSR2
      manual_command: "pkill -USR2 btop"
      reload_time: "< 100ms"
      notes: "SIGUSR2 may crash if sent within ~8 seconds of btop startup"
    
    # Implementation Details
    generator:
      class: BtopTheme
      module: apps.btop
      method: external_file
      location: dot_config/theme-system/scripts/apps/btop.py
      apply_method: apply_theme
      functions:
        - _generate_dynamic_theme
        - _generate_static_theme
        - _reload_btop
      notes: "Modular architecture: registered in apps/__init__.py, called via app.apply_theme()"
    
    # Color Mappings
    color_mappings:
      static:
        main_fg: "text"
        hi_fg: "mauve"
        selected_bg: "surface1"
        selected_fg: "mauve"
        inactive_fg: "overlay0"
        cpu_box: "mauve"
        mem_box: "green"
        net_box: "maroon"
        proc_box: "blue"
        notes: "Mauve as primary accent (user preference)"
      
      dynamic:
        main_fg: "on_surface"
        hi_fg: "primary"
        selected_bg: "surface_container_high"
        selected_fg: "primary"
        inactive_fg: "outline"
        cpu_box: "primary"
        mem_box: "tertiary"
        net_box: "secondary"
        proc_box: "primary"
        notes: "Material Design 3 semantic color mapping"
    
    # Cross-Platform Notes
    cross_platform:
      config_portable: true
      platform_differences: "none"
      notes: "Same config works on all platforms"
    
    # Implementation Status
    status:
      implemented: true
      tested: true
      bootstrap_working: true            # Config added via chezmoi add
      runtime_working: true              # Generator working
      date_implemented: "2025-11-26"
      research_doc: "thoughts/shared/research/2025-11-26_11-31-45_app-config-analysis-btop.md"
    
    # Known Issues / Notes
    notes:
      - "btop is C++ system monitor (15k+ GitHub stars)"
      - "Native .theme format with 30+ color keys"
      - "Gradient support for meters, graphs, and processes"
      - "SIGUSR2 reload - avoid within 8 seconds of startup"
      - "theme_background=False enables terminal transparency"
      - "No Catppuccin official port - custom theme generation"
      - "Preserves user's transparency preference during theme switches"

  # ==========================================================================
  # Television - Fuzzy Finder TUI (CURRENT IMPLEMENTATION)
  # ==========================================================================
  television:
    # Basic Info
    display_name: Television
    config_file: ~/.config/television/config.toml
    config_format: toml
    app_type: tui
    platform: cross_platform
    homepage: https://github.com/alexpasmantier/television
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: builtin                 # Priority 1: Use downloaded catppuccin themes
          enabled: true
          notes: "Uses official Catppuccin theme files in themes/ directory"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: external_file           # Priority 1: Generate dynamic.toml
          enabled: true
          notes: "Generates themes/dynamic.toml with Material Design 3 colors"
    
    # External File Configuration
    external_files:
      theme:
        path: ~/.config/television/themes/dynamic.toml
        format: toml
        template: null                     # Runtime-only, not templated
        load_mechanism: "theme = 'dynamic' in [ui] section of config.toml"
        notes: "Theme file with 17 color keys for dynamic theme"
    
    # Opacity Support
    opacity:
      supported: false
      notes: "TUI app - transparency controlled by terminal emulator"
      
    # Reload Behavior
    reload:
      automatic: false
      method: on_demand
      manual_command: null                 # Next tv invocation reads new config
      reload_time: "instant"
      notes: "On-demand tool - config read fresh on each invocation"
    
    # Implementation Details
    generator:
      class: TelevisionTheme
      module: apps.television
      method: hybrid                       # builtin for static, external_file for dynamic
      location: dot_config/theme-system/scripts/apps/television.py
      apply_method: apply_theme
      functions:
        - _generate_dynamic_theme
        - _update_config
      notes: "Modular architecture: registered in apps/__init__.py"
    
    # Catppuccin Integration
    catppuccin:
      official_port: true
      repository: "https://github.com/catppuccin/television"
      builtin: true                        # Also has builtin catppuccin theme
      available_flavors:
        - mocha
        - macchiato
        - frappe
        - latte
    
    # Cross-Platform Notes
    cross_platform:
      config_portable: true
      platform_differences: none
      notes: "Same config works on all platforms"
    
    # Implementation Status
    status:
      implemented: true
      tested: true
      date_implemented: "2025-11-26"
      research_doc: "thoughts/shared/research/2025-11-26_20-45-49_app-config-analysis-television.md"
      implementation_plan: "thoughts/shared/plans/television-theme-integration.md"
    
    # Known Issues / Notes
    notes:
      - "Television is Rust TUI fuzzy finder with excellent theme support"
      - "12 builtin themes including catppuccin"
      - "Official Catppuccin port with all flavors and accent colors"
      - "On-demand tool - config read fresh on each invocation"
      - "User has tv aliases in zshrc: tvf, tvd, tvg, tvh"

  # ==========================================================================
  # bottom - System Monitor (CURRENT IMPLEMENTATION)
  # ==========================================================================
  bottom:
    # Basic Info
    display_name: bottom
    config_file: ~/.config/bottom/bottom.toml
    config_format: toml
    app_type: tui
    platform: cross_platform
    homepage: https://github.com/ClementTsang/bottom
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: inline                   # Priority 1: Surgical TOML edit
          enabled: true
          notes: "Updates [styles] section with Catppuccin colors"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: inline                   # Priority 1: Surgical TOML edit
          enabled: true
          notes: "Updates [styles] section with Material Design 3 colors"
    
    # Built-in Themes (NOT used - we generate custom)
    builtin_themes:
      - "default"
      - "default-light"
      - "gruvbox"
      - "gruvbox-light"
      - "nord"
      - "nord-light"
    
    # Opacity Support
    opacity:
      supported: false
      notes: "TUI app - transparency controlled by terminal emulator"
      
    # Reload Behavior
    reload:
      automatic: false                   # No file watching
      method: manual                     # Must restart application
      manual_command: "q (quit) then btm (restart)"
      signal_support: false
      notes: "NO hot-reload capability - requires restart to apply changes"
    
    # Implementation Details
    generator:
      class: BottomTheme
      module: apps.bottom
      method: inline                     # Surgical tomlkit swap
      location: dot_config/theme-system/scripts/apps/bottom.py
      apply_method: apply_theme
      functions:
        - _generate_dynamic_styles
        - _generate_static_styles
        - _update_styles_sections
      notes: "Modular architecture: registered in apps/__init__.py, called via app.apply_theme()"
    
    # Catppuccin Integration
    catppuccin:
      official_port: true
      repository: "https://github.com/catppuccin/bottom"
      available_flavors:
        - mocha
        - macchiato
        - frappe
        - latte
      installation_method: "Paste into bottom.toml (no separate theme file)"
      notes: "Official port exists but we generate our own for dynamic support"
    
    # Cross-Platform Notes
    cross_platform:
      config_portable: true
      platform_differences:
        - "cache_color not available on Windows"
      notes: "Same config works on all platforms except minor Windows differences"
    
    # Implementation Status
    status:
      implemented: true
      tested: false
      bootstrap_working: true
      runtime_working: true
      date_implemented: "2025-11-27"
      research_doc: "thoughts/shared/research/2025-11-27_08-39-10_app-config-analysis-bottom.md"
    
    # Known Issues / Notes
    notes:
      - "bottom is Rust system monitor (18k+ GitHub stars)"
      - "Cross-platform: macOS, Linux, Windows, Termux"
      - "NO hot-reload - requires restart to apply config changes"
      - "No external theme file support - must embed in main config"
      - "Uses tomlkit for surgical updates preserving comments"
      - "TUI app - inherits terminal transparency"
      - "Official Catppuccin port at github.com/catppuccin/bottom"
      - "Built-in themes: gruvbox, nord (and light variants)"

  # ==========================================================================
  # lazygit - Terminal UI for Git (CURRENT IMPLEMENTATION)
  # ==========================================================================
  lazygit:
    # Basic Info
    display_name: lazygit
    config_file: ~/.config/lazygit/config.yml
    config_format: yaml
    app_type: tui
    platform: cross_platform
    homepage: https://github.com/jesseduffield/lazygit
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: inline                   # Priority 1: Surgical YAML edit
          enabled: true
          notes: "Updates gui.theme section with Catppuccin colors"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: inline                   # Priority 1: Surgical YAML edit
          enabled: true
          notes: "Updates gui.theme section with Material Design 3 colors"
    
    # Opacity Support
    opacity:
      supported: false
      notes: "TUI app - transparency controlled by terminal emulator"
      
    # Reload Behavior
    reload:
      automatic: false
      method: on_demand
      manual_command: null
      reload_time: "instant"
      notes: "On-demand app - config read fresh on each lazygit invocation"
    
    # Implementation Details
    generator:
      class: LazygitTheme
      module: apps.lazygit
      method: inline
      location: dot_config/theme-system/scripts/apps/lazygit.py
      apply_method: apply_theme
      functions:
        - _generate_dynamic_colors
        - _generate_static_colors
        - _update_theme_section
      notes: "Modular architecture: registered in apps/__init__.py"
    
    # Theme Keys (12 lazygit-specific color keys)
    theme_keys:
      - activeBorderColor
      - inactiveBorderColor
      - searchingActiveBorderColor
      - optionsTextColor
      - selectedLineBgColor
      - inactiveViewSelectedLineBgColor
      - cherryPickedCommitFgColor
      - cherryPickedCommitBgColor
      - markedBaseCommitFgColor
      - markedBaseCommitBgColor
      - unstagedChangesColor
      - defaultFgColor
    
    # Color Mappings
    color_mappings:
      static:
        activeBorderColor: "[mauve, bold]"
        inactiveBorderColor: "[overlay0]"
        optionsTextColor: "[blue]"
        selectedLineBgColor: "[surface1]"
        unstagedChangesColor: "[red]"
        defaultFgColor: "[text]"
        notes: "Based on official Catppuccin lazygit themes"
      
      dynamic:
        activeBorderColor: "[primary, bold]"
        inactiveBorderColor: "[outline]"
        optionsTextColor: "[primary]"
        selectedLineBgColor: "[surface_container_high]"
        unstagedChangesColor: "[error]"
        defaultFgColor: "[on_surface]"
        notes: "Material Design 3 semantic color mapping"
    
    # Catppuccin Integration
    catppuccin:
      official_port: true
      repository: "https://github.com/catppuccin/lazygit"
      available_flavors:
        - mocha
        - macchiato
        - frappe
        - latte
      available_accents:
        - blue
        - mauve
        - green
        - red
        - yellow
        - pink
        - teal
        - lavender
        - flamingo
        - rosewater
        - sapphire
        - sky
        - peach
        - maroon
      notes: "Official port with all flavors and 14 accent colors"
    
    # Cross-Platform Notes
    cross_platform:
      config_portable: true
      platform_differences: none
      notes: "Same config works on all platforms - no templating needed"
    
    # Implementation Status
    status:
      implemented: true
      tested: true
      date_implemented: "2025-11-28"
      research_doc: "thoughts/shared/research/2025-11-27_20-16-38_app-config-analysis-lazygit.md"
    
    # Known Issues / Notes
    notes:
      - "lazygit is Go TUI (68.6k+ GitHub stars)"
      - "Cross-platform: macOS, Linux, Windows, Termux"
      - "On-demand app - config read fresh on each invocation"
      - "No external theme file support - must use inline method"
      - "Uses ruamel.yaml for surgical updates preserving comments"
      - "TUI app - inherits terminal transparency"
      - "Official Catppuccin port at github.com/catppuccin/lazygit"
      - "Color values are lists: [color, modifier?] format"

  # ==========================================================================
  # AeroSpace - Tiling Window Manager (NOT THEMED)
  # ==========================================================================
  aerospace:
    # Basic Info
    display_name: AeroSpace
    config_file: ~/.config/aerospace/aerospace.toml
    config_format: toml
    app_type: window_manager
    platform: macos
    homepage: https://github.com/nikitabobko/AeroSpace
    
    # Theme Support
    static_theme:
      priority:
        - method: not_applicable
          enabled: false
          notes: "Window manager config doesn't need theme colors"
    
    dynamic_theme:
      priority:
        - method: not_applicable
          enabled: false
          notes: "Window manager config doesn't need theme colors"
    
    # Role in Theme System
    role: "Service Orchestrator"
    responsibilities:
      - "Starts borders at login (after-startup-command)"
      - "Reloads borders on workspace changes (exec-on-workspace-change)"
      - "Provides window management for themed applications"
      - "Ensures borders daemon is always running"
    
    # Integration with Theme System
    integrations:
      borders:
        startup: "after-startup-command = ['exec-and-forget borders']"
        workspace_change: "exec-on-workspace-change = ['exec-and-forget', 'borders']"
        notes: "Ensures borders is running and updates on focus changes"
    
    # Implementation Status
    status:
      implemented: true
      themed: false                     # Not a themed application
      bootstrap_working: true
      date_added: "2025-10-17"
      notes: "AeroSpace config managed by chezmoi but doesn't participate in theming"
    
    # Configuration Details
    config_notes:
      - "TOML configuration for keybindings, layouts, and startup commands"
      - "Not templated - static configuration"
      - "Managed by chezmoi: dot_config/aerospace/aerospace.toml"
      - "Key role: Orchestrates borders lifecycle"
    
    # Known Issues / Notes
    notes:
      - "Window manager doesn't need theme colors itself"
      - "Critical for borders integration - starts and maintains borders daemon"
      - "Configuration is static and doesn't change with themes"
      - "Could potentially theme gaps/padding colors in future"

  # ==========================================================================
  # CAVA - Console-based Audio Visualizer (CURRENT IMPLEMENTATION)
  # ==========================================================================
  cava:
    # Basic Info
    display_name: CAVA
    config_file: ~/.config/cava/config
    config_format: ini
    app_type: audio_visualizer
    platform: cross_platform
    homepage: https://github.com/karlstav/cava
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: external_file        # Priority 1: Load from external theme file
          enabled: true
          notes: "Generates 8-color gradient theme in ~/.config/cava/themes/"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: external_file        # Priority 1: Load MD3 colors from file
          enabled: true
          notes: "Generates dynamic theme with 8-color gradient from Material Design 3"
    
    # External File Configuration
    external_files:
      theme:
        path: ~/.config/cava/themes/dynamic
        format: ini
        template: null                     # Runtime-only, not templated
        load_mechanism: "theme = 'dynamic' in [color] section"
        notes: "Theme file with [color] section and 8-color vertical gradient"
    
    # Gradient Configuration
    gradient:
      type: vertical
      direction: "bottom to top"
      colors: 8
      mapping: "Color 1 (bottom, low freq) -> Color 8 (top, high freq)"
      strategy: "Base color -> Mid color -> Bright color with smooth blending"
      notes: "Creates visual energy flow matching frequency spectrum"
    
    # Opacity Support
    opacity:
      supported: false
      notes: "CAVA is ncurses TUI - transparency controlled by terminal emulator"
      
    # Reload Behavior
    reload:
      automatic: false                  # No file watching
      method: signal                    # SIGUSR2 for color-only reload
      signal: SIGUSR2                   # Color reload (fast, no audio interruption)
      alternative_signal: SIGUSR1       # Full reload (slower, resets bar heights)
      manual_command: "pkill -USR2 cava"
      reload_time: "< 100ms"
      keyboard_shortcut: "c"            # Reload colors when CAVA is focused
      notes: "SIGUSR2 designed for theme automation - no audio reinitialization"
    
    # Implementation Details (for Python generators)
    generator:
      class: CavaTheme
      module: apps.cava
      method: external_file
      location: dot_config/theme-system/scripts/apps/cava.py
      apply_method: apply_theme
      functions:
        - _generate_dynamic_gradient
        - _generate_static_gradient
        - _create_gradient
        - _write_theme_file
        - _reload_cava
      notes: "Generates 8-color gradient for smooth spectrum visualization"
    
    # Color Mappings
    color_mappings:
      static:
        strategy: "3-color blend: mauve -> pink -> green"
        gradient_color_1: "{{ .theme.colors.mauve }}"          # Bottom (darkest)
        gradient_color_2: "blend(mauve, pink, 0.33)"
        gradient_color_3: "blend(mauve, pink, 0.66)"
        gradient_color_4: "{{ .theme.colors.pink }}"           # Middle
        gradient_color_5: "blend(pink, green, 0.33)"
        gradient_color_6: "blend(pink, green, 0.66)"
        gradient_color_7: "{{ .theme.colors.green }}"          # Top
        gradient_color_8: "green +15% lightness"               # Peak (brightest)
        notes: "Mauve (user's favorite) -> Pink -> Green creates vibrant spectrum"
      
      dynamic:
        strategy: "3-color blend: primary -> secondary -> tertiary"
        gradient_color_1: "{{ .theme.material.primary }}"
        gradient_color_2: "blend(primary, secondary, 0.33)"
        gradient_color_3: "blend(primary, secondary, 0.66)"
        gradient_color_4: "{{ .theme.material.secondary }}"
        gradient_color_5: "blend(secondary, tertiary, 0.33)"
        gradient_color_6: "blend(secondary, tertiary, 0.66)"
        gradient_color_7: "{{ .theme.material.tertiary }}"
        gradient_color_8: "tertiary +15% lightness"
        notes: "Material Design 3 semantic color progression"
    
    # Configuration Integration
    config_integration:
      theme_reference:
        file: ~/.config/cava/config
        section: "[color]"
        key: "theme"
        value: "'dynamic'"
        update_method: "manual (one-time config change)"
        notes: "Main config references external theme file"
    
    # Terminal Compatibility
    terminal_compatibility:
      gradient_support:
        requires: "ncurses mode + terminal with color definition changes"
        compatible:
          - "Gnome Terminal"
          - "rxvt-unicode"
          - "WezTerm"
          - "Most modern terminals"
        incompatible:
          - "Konsole (terminal limitation)"
        workaround: "Use noncurses mode for limited gradient support"
      notes: "Most terminals support gradients in ncurses mode"
    
    # Implementation Status
    status:
      implemented: true
      tested: false                     # Needs testing
      bootstrap_working: true           # Config already in chezmoi
      runtime_working: true             # Generator implemented
      date_implemented: "2025-10-28"
      implementation_plan: "thoughts/shared/plans/cava-theme-integration.md"
      research_doc: "thoughts/shared/research/2025-10-28_13-46-26_app-config-analysis-cava.md"
    
    # Known Issues / Notes
    notes:
      - "CAVA is ncurses audio visualizer (7k+ GitHub stars)"
      - "8-color gradient provides smooth spectrum visualization"
      - "SIGUSR2 signal designed for theme automation (fast, non-disruptive)"
      - "External theme file follows CAVA's native theme system"
      - "Colors transition from dark (bottom) to bright (top) matching spectrum"
      - "Terminal emulator controls transparency, not CAVA"
      - "Keyboard shortcut 'c' reloads colors when CAVA is focused"
      - "No Catppuccin official port - custom gradient mapping"

  # ==========================================================================
  # Posting - TUI HTTP Client (CURRENT IMPLEMENTATION)
  # ==========================================================================
  posting:
    # Basic Info
    display_name: Posting
    config_file: ~/.config/posting/config.yaml
    config_format: yaml
    app_type: tui
    platform: cross_platform
    homepage: https://posting.sh/
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: external_file
          enabled: true
          notes: "Generates catppuccin-{variant}-mauve.yaml in themes directory"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: external_file
          enabled: true
          notes: "Generates dynamic.yaml with Material Design 3 colors"
    
    # External File Configuration
    external_files:
      theme:
        path: ~/.local/share/posting/themes/{theme_name}.yaml
        format: yaml
        template: null
        load_mechanism: "theme = '<name>' in config.yaml"
        notes: "Theme files with 8 core colors + extended styling"
    
    # Opacity Support
    opacity:
      supported: false
      notes: "TUI app - transparency NOT supported by Textual framework. Background matches terminal theme color instead."
    
    # Reload Behavior
    reload:
      automatic: true
      method: file_watch
      config_key: watch_themes
      reload_time: "< 100ms"
      notes: "Textual framework watches theme files; instant reload"
    
    # Implementation Details
    generator:
      class: PostingTheme
      module: apps.posting
      method: external_file
      location: dot_config/theme-system/scripts/apps/posting.py
      apply_method: apply_theme
      functions:
        - _generate_dynamic_theme
        - _generate_static_theme
        - _update_config
      notes: "Modular architecture: registered in apps/__init__.py"
    
    # Color Mappings
    color_mappings:
      static:
        primary: "{{ .theme.colors.mauve }}"
        secondary: "{{ .theme.colors.blue }}"
        accent: "{{ .theme.colors.green }}"
        background: "{{ .theme.colors.base }}"
        surface: "{{ .theme.colors.surface0 }}"
        error: "{{ .theme.colors.red }}"
        success: "{{ .theme.colors.green }}"
        warning: "{{ .theme.colors.yellow }}"
        notes: "Mauve as primary accent (user preference)"
      
      dynamic:
        primary: "{{ .theme.material.primary }}"
        secondary: "{{ .theme.material.secondary }}"
        accent: "{{ .theme.material.tertiary }}"
        background: "{{ .theme.material.background }}"
        surface: "{{ .theme.material.surface_container }}"
        error: "{{ .theme.material.error }}"
        success: "{{ .theme.material.tertiary }}"
        warning: "{{ .theme.material.secondary }}"
        notes: "Material Design 3 semantic mapping"
    
    # Catppuccin Integration
    catppuccin:
      official_port: true
      repository: "https://github.com/catppuccin/posting"
      available_flavors:
        - mocha
        - macchiato
        - frappe
        - latte
      notes: "Official port provides reference implementation"
    
    # Cross-Platform Notes
    cross_platform:
      config_portable: true
      platform_differences: none
      installation: "uv tool install --python 3.13 posting"
      notes: "Same config works on all platforms"
    
    # Implementation Status
    status:
      implemented: true
      tested: true
      bootstrap_working: true
      runtime_working: true
      date_implemented: "2025-11-28"
      research_doc: "thoughts/shared/research/2025-11-28_22-45-00_app-config-analysis-posting.md"
    
    # Known Issues / Notes
    notes:
      - "Posting is Python TUI HTTP client (10.7k+ GitHub stars)"
      - "Built with Textual framework"
      - "Cross-platform: macOS, Linux, Windows, likely Termux"
      - "Live theme reload via filesystem watching (enabled by default)"
      - "Theme files go to ~/.local/share/posting/themes/ (XDG_DATA_HOME)"
      - "Transparent backgrounds NOT supported - uses matching background color"
      - "Official Catppuccin port at github.com/catppuccin/posting"
      - "8 core colors + extended sections (text_area, url, syntax, method)"

  # ==========================================================================
  # Yazi - Terminal File Manager (CURRENT IMPLEMENTATION)
  # ==========================================================================
  yazi:
    # Basic Info
    display_name: Yazi
    config_file: ~/.config/yazi/yazi.toml
    config_format: toml
    app_type: tui
    platform: cross_platform
    homepage: https://yazi-rs.github.io/
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: external_file
          enabled: true
          notes: "Uses flavor system with pre-created Catppuccin flavors"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: external_file
          enabled: true
          notes: "Generates dynamic.yazi/flavor.toml with MD3 colors"
    
    # External File Configuration
    external_files:
      flavor:
        path: ~/.config/yazi/flavors/{theme}.yazi/flavor.toml
        format: toml
        template: null
        load_mechanism: "[flavor] dark/light reference in theme.toml"
        notes: "Flavor directory with flavor.toml containing all UI colors"
    
    # Opacity Support
    opacity:
      supported: false
      notes: "TUI app - transparency via terminal emulator (use bg = 'reset' in flavor)"
    
    # Reload Behavior
    reload:
      automatic: false
      method: manual
      manual_command: "Restart yazi (q then y)"
      notes: "Hot reload deliberately NOT supported for performance"
    
    # Implementation Details
    generator:
      class: YaziTheme
      module: apps.yazi
      method: external_file
      location: dot_config/theme-system/scripts/apps/yazi.py
      apply_method: apply_theme
      functions:
        - _generate_dynamic_flavor
        - _update_theme_reference
      notes: "Generates flavor.toml for dynamic themes, updates theme.toml reference"
    
    # Catppuccin Integration
    catppuccin:
      official_port: true
      repository: "https://github.com/catppuccin/yazi"
      available_flavors:
        - mocha
        - macchiato
        - frappe
        - latte
      notes: "Official port with all flavors, also in yazi-rs/flavors"
    
    # Cross-Platform Notes
    cross_platform:
      config_portable: true
      platform_differences: "[opener] section uses 'for' attribute for platform-specific commands"
      notes: "Same config works on all platforms with platform-specific openers"
    
    # Implementation Status
    status:
      implemented: true
      tested: false
      bootstrap_working: true
      runtime_working: true
      date_implemented: "2025-11-28"
      research_doc: "thoughts/shared/research/2025-11-28_08-30-00_app-config-analysis-yazi.md"
    
    # Known Issues / Notes
    notes:
      - "Yazi is Rust async file manager (blazing fast)"
      - "Flavor system perfect for theme integration"
      - "NO hot reload - restart required (design choice for performance)"
      - "Image preview works with WezTerm out-of-box (Inline Images Protocol)"
      - "Shell wrapper y() function enables cd on exit (already in zshrc)"
      - "Official Catppuccin port at github.com/catppuccin/yazi"
      - "Plugin system via ya pkg for extensibility"
      - "Cross-platform: macOS, Linux, Windows, Termux"
      - "Dependencies: ffmpegthumbnailer, ffmpeg, 7zip, jq, poppler, fd, rg"

  # ==========================================================================
  # gitui - Blazingly Fast Terminal UI for Git (NEW 2025-11-28)
  # ==========================================================================
  gitui:
    # Basic Info
    display_name: gitui
    config_file: ~/.config/gitui/theme.ron
    config_format: ron
    app_type: tui
    platform: cross_platform
    homepage: https://github.com/gitui-org/gitui
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: external_file
          enabled: true
          notes: "Generates theme.ron with Catppuccin colors"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: external_file
          enabled: true
          notes: "Generates theme.ron with Material Design 3 colors"
    
    # External File Configuration
    external_files:
      theme:
        path: ~/.config/gitui/theme.ron
        format: ron
        template: null
        load_mechanism: "Auto-loaded from config directory"
        notes: "RON format with 21 color keys wrapped in Some()"
    
    # Opacity Support
    opacity:
      supported: false
      notes: "TUI app - transparency controlled by terminal emulator"
    
    # Reload Behavior
    reload:
      automatic: false
      method: manual
      manual_command: "Quit (q) and restart gitui"
      signal_support: false
      notes: "NO hot-reload capability - must restart to apply changes"
    
    # Implementation Details
    generator:
      class: GituiTheme
      module: apps.gitui
      method: external_file
      location: dot_config/theme-system/scripts/apps/gitui.py
      apply_method: apply_theme
      functions:
        - _generate_dynamic_colors
        - _generate_static_colors
        - _format_ron
      notes: "Generates complete theme.ron file; RON format via string templating"
    
    # Color Keys (21 gitui-specific color keys)
    theme_keys:
      - selected_tab
      - command_fg
      - selection_bg
      - selection_fg
      - cmdbar_bg
      - cmdbar_extra_lines_bg
      - disabled_fg
      - diff_line_add
      - diff_line_delete
      - diff_file_added
      - diff_file_removed
      - diff_file_moved
      - diff_file_modified
      - commit_hash
      - commit_time
      - commit_author
      - danger_fg
      - push_gauge_bg
      - push_gauge_fg
      - tag_fg
      - branch_fg
    
    # Catppuccin Integration
    catppuccin:
      official_port: true
      repository: "https://github.com/catppuccin/gitui"
      available_flavors:
        - mocha
        - macchiato
        - frappe
        - latte
      notes: "Official port with all flavors; uses Whiskers templating"
    
    # Cross-Platform Notes
    cross_platform:
      config_portable: true
      platform_differences:
        - "Windows uses %APPDATA%\\gitui\\ (handled by chezmoi)"
      notes: "Same config works on all platforms"
    
    # Implementation Status
    status:
      implemented: true
      tested: false
      date_implemented: "2025-11-28"
      research_doc: "thoughts/shared/research/2025-11-28_00-35-00_app-config-analysis-gitui.md"
    
    # Known Issues / Notes
    notes:
      - "gitui is Rust TUI (18k+ GitHub stars)"
      - "Cross-platform: macOS, Linux, Windows, Termux"
      - "NO hot-reload - must restart to apply config changes"
      - "RON format (unique) - no native Python library, use string templating"
      - "Official Catppuccin port at github.com/catppuccin/gitui"
      - "21 color keys for comprehensive theming"
      - "Use 'Reset' for selected_tab to inherit terminal transparency"
      - "Vim-style keybindings included (key_bindings.ron)"
      - "Faster than lazygit (Rust vs Go) but less popular"

  # ==========================================================================
  # Zed - GPU-Accelerated Code Editor (NEW 2025-11-28)
  # ==========================================================================
  zed:
    # Basic Info
    display_name: Zed
    config_file: ~/.config/zed/settings.json
    config_format: jsonc
    app_type: gui_editor
    platform: cross_platform
    homepage: https://zed.dev/
    
    # Static Theme Support (Catppuccin: mocha, latte, frappe, macchiato)
    static_theme:
      priority:
        - method: builtin
          enabled: true
          notes: "Uses official Catppuccin extension themes"
    
    # Dynamic Theme Support (Material You from wallpaper)
    dynamic_theme:
      priority:
        - method: external_file
          enabled: true
          notes: "Generates dynamic.json theme file in themes/ directory"
    
    # External File Configuration
    external_files:
      theme:
        path: ~/.config/zed/themes/dynamic.json
        format: json
        template: null
        load_mechanism: "theme reference in settings.json"
        notes: "Zed theme file following v0.2.0 schema"
    
    # Opacity Support
    opacity:
      supported: false
      notes: "Zed does not support window transparency (feature requested but not implemented)"
    
    # Reload Behavior
    reload:
      automatic: true
      method: file_watch
      manual_command: null
      reload_time: "< 1s"
      notes: "settings.json hot-reloads automatically. Theme files in themes/ require restart."
    
    # Implementation Details
    generator:
      class: ZedTheme
      module: apps.zed
      method: hybrid
      location: dot_config/theme-system/scripts/apps/zed.py
      apply_method: apply_theme
      functions:
        - _generate_dynamic_theme
        - _build_style
        - _update_config
      notes: "Hybrid: builtin for static, external_file for dynamic"
    
    # Theme Structure
    config_structure:
      theme:
        mode: "system"
        light: "theme name for light mode"
        dark: "theme name for dark mode"
    
    # Catppuccin Integration
    catppuccin:
      official_port: true
      repository: "https://github.com/catppuccin/zed"
      available_flavors:
        - mocha
        - macchiato
        - frappe
        - latte
      icon_theme: "Catppuccin Icons (separate extension)"
      notes: "Official extension available in Zed Extensions marketplace"
    
    # Cross-Platform Notes
    cross_platform:
      config_portable: partial
      platform_differences:
        macos: "~/.config/zed/"
        linux: "~/.config/zed/ or $XDG_CONFIG_HOME/zed/"
        windows: "%USERPROFILE%\\AppData\\Roaming\\Zed\\"
      notes: "Config format identical, paths differ on Windows"
    
    # Implementation Status
    status:
      implemented: true
      tested: true
      bootstrap_working: true
      runtime_working: true
      date_implemented: "2025-11-28"
      research_doc: "thoughts/shared/research/2025-11-28_01-16-35_app-config-analysis-zed.md"
    
    # Known Issues / Notes
    notes:
      - "Zed is GPU-accelerated code editor (Rust-based)"
      - "Official Catppuccin extension available with all flavors"
      - "Config uses JSONC (JSON with comments) - comment loss on write"
      - "Settings hot-reload automatically"
      - "Theme files in themes/ directory require Zed restart"
      - "NO opacity/transparency support (feature requested but not implemented)"
      - "Windows config path differs from macOS/Linux"
      - "Icon theme syncs with color theme for Catppuccin"

# ==========================================================================
# Schema Field Definitions (for reference)
# ==========================================================================
schema:
  version: "1.0"
  
  field_descriptions:
    display_name: "Human-readable app name"
    config_file: "Path to main config file"
    config_format: "File format (lua, toml, yaml, json, conf, etc)"
    app_type: "Application category (terminal_emulator, tui, gui, shell_prompt, etc)"
    
    static_theme.priority: "Ordered list of methods to try for Catppuccin themes"
    dynamic_theme.priority: "Ordered list of methods to try for Material You themes"
    
    method_types:
      - builtin: "App has native/plugin support for Catppuccin"
      - external_file: "App can load colors from separate file (RECOMMENDED)"
      - inline: "Colors must be in main config file (surgical swap or full template)"
      - terminal_colors: "App uses 16 ANSI terminal colors (fallback)"
    
    external_files:
      path: "Where to write the generated file (~/.config/...)"
      format: "File format for colors (lua_module, toml, yaml, etc)"
      template: "Chezmoi template path for bootstrapping (dot_config/...)"
      load_mechanism: "How app loads this file (for documentation)"
    
    opacity.method:
      - external_file: "Separate opacity config file"
      - inline: "Opacity in main config"
      - compositor: "Window manager/compositor handles it"
    
    reload.method:
      - file_watch: "App watches for file changes and auto-reloads"
      - signal: "Send UNIX signal to reload (e.g., SIGUSR2)"
      - manual: "User must manually reload (e.g., :source command)"
      - instant: "No reload needed (e.g., shell prompts regenerate)"
    
    generator:
      class: "App class name (e.g., WeztermTheme, NcspotTheme)"
      module: "Python module path (e.g., apps.wezterm, apps.ncspot)"
      method: "Implementation approach (external_file, inline, inline_template)"
      location: "File path where class is defined (e.g., dot_config/theme-system/scripts/apps/wezterm.py)"
      apply_method: "Main method called by theme-manager (always apply_theme)"
      functions: "List of helper methods (e.g., generate_colors, generate_opacity, reload)"
      notes: "Additional implementation details"
  
  validation:
    script: "dot_config/theme-system/scripts/executable_validate-apps.py"
    command: "~/.config/theme-system/scripts/validate-apps.py"
    notes: "Optional validation tool to check schema correctness"

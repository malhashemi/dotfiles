# Skill Creator - Task Runner
# Run tasks with: just <recipe> [args...]

# Default recipe - show help
default:
    @just --list

# Directory containing scripts
scripts_dir := justfile_directory() / "scripts"

# Initialize a new skill
init skill_name path:
    uv run {{scripts_dir}}/init_skill.py {{skill_name}} --path {{path}}

# Validate a skill
validate skill_path:
    uv run {{scripts_dir}}/quick_validate.py {{skill_path}}

# Package a skill into a zip file
package skill_path output_dir="":
    #!/usr/bin/env bash
    if [ -n "{{output_dir}}" ]; then
        uv run {{scripts_dir}}/package_skill.py {{skill_path}} {{output_dir}}
    else
        uv run {{scripts_dir}}/package_skill.py {{skill_path}}
    fi

# Initialize a new skill in the global opencode skills directory
init-global skill_name:
    uv run {{scripts_dir}}/init_skill.py {{skill_name}} --path ~/.config/opencode/skills

# Validate all skills in a directory
validate-all skills_dir:
    #!/usr/bin/env bash
    for skill in {{skills_dir}}/*/; do
        if [ -f "$skill/SKILL.md" ]; then
            echo "Validating: $skill"
            uv run {{scripts_dir}}/quick_validate.py "$skill"
            echo ""
        fi
    done
